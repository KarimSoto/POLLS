{% extends "../base/base.html" %}



{% block title %}Resultados de las votaciones{% endblock %}


    

    {% block template %}
    
    <h1>{{ question.question_text}}</h1>

    <ul>
        {% for choice in question.choice_set.all %}
          <li>
            <button class="dropdown-btn">{{ choice.choice_text }}-- {{ choice.vote_set.all.count }}</button>
            <ul class="dropdown-content">
              {% for vote in choice.vote_set.all %}
                <li>{{ vote.nombreusuario }}</li>
              {% endfor %}
            </ul>
          </li>
        {% endfor %}
      </ul>
   
   <style>
   .dropdown-btn {
     background: none;
     border: none;
     outline: none;
     cursor: pointer;
     color: white;
   }
   
   .dropdown-content {
     display: none;
   }
   
   .dropdown-btn.active + .dropdown-content {
     display: block;
   }
   </style>
   
   <script>
   // Add click event listener to each dropdown button
   var dropdownBtns = document.getElementsByClassName("dropdown-btn");
   for (var i = 0; i < dropdownBtns.length; i++) {
     dropdownBtns[i].addEventListener("click", function() {
         this.classList.toggle("active");
         var dropdownContent = this.nextElementSibling;
         if (dropdownContent.style.display === "block") {
             dropdownContent.style.display = "none";
         } else {
             dropdownContent.style.display = "block";
         }
     });
   }
   </script>
    <div style="width: 400px; height: 400px;">
        <canvas id="myChart"></canvas>
    </div>
      
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
      
    
    <script>
    
        document.addEventListener("DOMContentLoaded", function() {
            const data = {
                labels: {{labels|safe}},
                datasets: [{
                    label: 'My First Dataset',
                    data: {{data|safe}},
                    backgroundColor: {{colores|safe}},
                    hoverOffset: 4
                }]
            };

            const ctx = document.getElementById('myChart').getContext('2d');
            const myChart = new Chart(ctx, {
                type: 'pie',
                data: data,
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom'
                        }
                    }
                }
            });
        });
    </script>
   
    {% endblock %} 
